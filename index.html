<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>ğŸ³ Explore Docker</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<style type="text/css">
			.reveal pre {
				box-shadow: 0 0 0 #222 !important;
			}
		</style>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<h1>åˆæ¢ Docker ğŸ³</h1>
					<h2>ä¸ºä½ æ‰“æ‹›è¶…çº§å¼€å‘ç¯å¢ƒ</h2>
					<data>2016.7.27</data>
				</section>
				<section>
					<h2>ä»€ä¹ˆæ˜¯ Docker?</h2>
					<img src="img/what_is_docker.png">
				</section>
				<section>
					<h2>ä»€ä¹ˆæ˜¯ Docker?</h2>
					<ul>
						<li class="fragment" data-fragment-index="0">ä¸ºå¼€å‘è€…å’Œç³»ç»Ÿç®¡ç†è€…æ‰“é€ çš„ï¼Œç”¨äº<strong>æ„å»º</strong>ã€<strong>åˆ†å‘</strong>å’Œ<strong>è¿è¡Œ</strong>åº”æœ‰ç¨‹åºçš„å¼€å‘å¹³å°ã€‚</li>
						<li class="fragment" data-fragment-index="1">éå¸¸è½»é‡çš„è™šæ‹ŸåŒ–å®¹å™¨</li>
						<li class="fragment" data-fragment-index="2">è·¨å¹³å°ï¼šæ”¯æŒå¤§éƒ¨åˆ†çš„ Linux å‘å‹ç‰ˆï¼Œæœ€è¿‘å·²å¼€å§‹æ”¯æŒ Mac å’Œ Windows</li>
					</ul>
				</section>
				<section>
					<h2>ä»€ä¹ˆæ˜¯å®¹å™¨?</h2>
					<img src="img/container.jpg">
				</section>
				<section>
					<h2>ä¼ ç»Ÿ VM VS. Docker</h2>
					<div>
						<img src="img/vm.png">
						<img src="img/docker_vm.png">
					</div>
				</section>
				<section>
					<h2>ç›´æ¥æ¯”å¯¹</h2>
					<table>
						<thead>
							<tr>
								<th>ç‰¹æ€§</th>
								<th>Docker</th>
								<th>VM</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>å¯åŠ¨é€Ÿåº¦</td>
								<td>ç§’çº§</td>
								<td>åˆ†é’Ÿçº§</td>
							</tr>
							<tr>
								<td>ç¡¬ç›˜ä½¿ç”¨</td>
								<td>MB</td>
								<td>GB</td>
							</tr>
							<tr>
								<td>æ€§èƒ½</td>
								<td>æ¥è¿‘åŸç”Ÿ</td>
								<td>å¼±äº</td>
							</tr>
							<tr>
								<td>ç³»ç»Ÿæ”¯æŒé‡</td>
								<td>å•æœºæ”¯æŒä¸Šåƒä¸ªå®¹å™¨</td>
								<td>ä¸€èˆ¬å‡ åä¸ª</td>
							</tr>
						</tbody>
					</table>
				</section>
				<section>
					<h2>é•œè±¡ VS. å®¹å™¨</h2>
					<img src="img/docker-filesystems-multilayer2.png">
				</section>
				<section>
					<h2>é•œè±¡ VS. å®¹å™¨</h2>
					<img src="img/images_containers.png">
				</section>
				<section>
					<h2>ä¸ºä»€ä¹ˆä½ åº”è¯¥å…³æ³¨?</h2>
					<ul>
						<li class="fragment" data-fragment-index="0">æ›´å¿«é€Ÿçš„äº¤ä»˜å’Œéƒ¨ç½²</li>
						<li class="fragment" data-fragment-index="1">æ›´é«˜æ•ˆçš„è™šæ‹ŸåŒ–</li>
						<li class="fragment" data-fragment-index="2">æ›´è½»æ¾çš„è¿ç§»å’Œæ‰©å±•</li>
						<li class="fragment" data-fragment-index="3">æ›´ç®€å•é«˜æ•ˆçš„ç®¡ç†</li>
					</ul>
				</section>
				<section>
					<h2>å½“ç›®å‰ä¸ºæ­¢æˆ‘ä»¬å­¦ä¼šäº†ä»€ä¹ˆ?</h2>
					<ul>
						<li class="fragment" data-fragment-index="0">å®¹å™¨ - è½»é‡çš„è™šæ‹ŸåŒ–ç¯å¢ƒ</li>
						<li class="fragment" data-fragment-index="1">é•œè±¡ - ç”¨æ¥åˆ›å»ºå®¹å™¨çš„åªè¯»æ¨¡æ¿</li>
					</ul>
				</section>
				<section>
					<h2>Docker å‘½ä»¤è¡Œ</h2>
					<div class="fragment" data-fragment-index="0">
						<pre>
							<code data-trim class="ruby">
								$ [sudo] docker [command] [flags] [arguments]
							</code>
						</pre>
					</div>
					<p class="fragment" data-fragment-index="1">ä¾‹å¦‚:</p>
					<div class="fragment" data-fragment-index="2">
						<pre>
							<code data-trim class="ruby">
								$ docker pull centos
							</code>
						</pre>
					</div>
					<div class="fragment" data-fragment-index="3">
						<pre>
							<code data-trim class="ruby">
								$ docker run -d -p 80:80 nginx
							</code>
						</pre>
					</div>
				</section>
				<section>
					<h2>æ€æ ·è¿è¡Œå®¹å™¨?</h2>
					<div class="fragment" data-fragment-index="0">
						<pre>
							<code data-trim class="ruby">
								$ docker run centos /bin/echo 'Hello World'
							</code>
						</pre>
					</div>
					<div class="fragment" data-fragment-index="1">
						<pre>
							<code data-trim class="ruby">
								user@host:/$ docker run -i -t centos /bin/bash
root@af8bae53bdd3:/#
							</code>
						</pre>
					</div>
					<p class="fragment" data-fragment-index="2">è®©æˆ‘ä»¬åœ¨å®¹å™¨å†…éƒ¨è¿è¡Œä¸€äº›å‘½ä»¤è¯•è¯•ï¼š</p>
					<div class="fragment" data-fragment-index="3">
						<pre>
							<code data-trim class="ruby">
								root@af8bae53bdd3:/# pwd

/

root@af8bae53bdd3:/# ls

bin boot dev etc home lib lib64 media mnt opt proc root run sbin srv sys tmp usr var
							</code>
						</pre>
					</div>
				</section>
				<section>
					<h2>æ“ä½œå®¹å™¨</h2>
					<ul>
						<li>
							<p>åˆ—å‡ºæœ¬åœ°æ‰€æœ‰å®¹å™¨ï¼š</p>
							<pre>
								<code data-trim class="ruby">
									$ docker ps
								</code>
							</pre>
						</li>
						<li>
							<p>å±•ç¤ºå®¹å™¨è¿è¡Œæ—¶çš„æ ‡å‡†è¾“å‡ºï¼š</p>
							<pre>
								<code data-trim data-noescape class="ruby">
									$ docker logs &lt;<strong class="hljs-string">containerId</strong>&gt;
								</code>
							</pre>
						</li>
						<li>
							<p>åœæ­¢è¿è¡Œçš„å®¹å™¨ï¼š</p>
							<pre>
								<code data-trim data-noescape class="ruby">
									$ docker stop &lt;<strong class="hljs-string">containerId</strong>&gt;
								</code>
							</pre>
						</li>
					</ul>
				</section>
				<section>
					<h2>æ“ä½œå®¹å™¨</h2>
					<ul>
						<li>
							<p>åˆ é™¤å®¹å™¨ï¼š</p>
							<pre>
								<code data-trim data-noescape class="ruby">
									$ docker rm &lt;<strong class="hljs-string">containerId</strong>&gt;
								</code>
							</pre>
						</li>
						<li>
							<p>å¯åŠ¨å·²åœæ­¢çš„å®¹å™¨ï¼š</p>
							<pre>
								<code data-trim data-noescape class="ruby">
									$ docker start &lt;<strong class="hljs-string">containerId</strong>&gt;
								</code>
							</pre>
						</li>
						<li>
							<p>æš‚åœè¿è¡Œçš„å®¹å™¨ï¼š</p>
							<pre>
								<code data-trim data-noescape class="ruby">
									$ docker pause &lt;<strong class="hljs-string">containerId</strong>&gt;
								</code>
							</pre>
						</li>
					</ul>
				</section>
				<section>
					<h2>æŒ‚è½½æœ¬åœ°ç›®å½•æˆ–æ–‡ä»¶</h2>
					<pre class="fragment" data-fragment-index="0">
						<code data-trim class="ruby">
							$ docker run -d -p 80:80 \
    -v $(pwd)/nginx-example/index.html:/usr/share/nginx/html/index.html \
    --name webapp nginx
						</code>
					</pre>
					<p class="fragment" data-fragment-index="1">ä¿®æ”¹æœ¬åœ°çš„ <code>nginx-example/index.html</code> çœ‹çœ‹</p>
				</section>
				<section>
					<h2>æŒ‚è½½æœ¬åœ°ç›®å½•æˆ–æ–‡ä»¶</h2>
					<pre data-fragment-index="0" class="fragment">
						<code data-trim class="ruby">
							$ docker run -it --rm -v $(pwd)/python-example/:/root/ \
    python:slim \
    /bin/bash

root@6f2aef6108b7:/# python root/version.py
3.5.2 (default, Jul 19 2016, 21:14:55)
[GCC 4.9.2]
						</code>
					</pre>
					<pre data-fragment-index="1" class="fragment">
						<code data-trim class="ruby">
							$ docker run -it --rm -v $(pwd)/python-example/:/root/ \
    python:2-slim \
    /bin/bash

root@38004526c194:/# python root/version.py
2.7.12 (default, Jul 19 2016, 20:08:29)
[GCC 4.9.2]
						</code>
					</pre>
				</section>
				<section>
					<h2>æ•°æ®å·å®¹å™¨</h2>
					<p class="fragment" data-fragment-index="0">å¦‚æœä½ æœ‰ä¸€äº›æŒç»­æ›´æ–°çš„æ•°æ®éœ€è¦åœ¨å®¹å™¨ä¹‹é—´å…±äº«ï¼Œæœ€å¥½åˆ›å»ºæ•°æ®å·å®¹å™¨ã€‚</p>
					<p class="fragment" data-fragment-index="1">é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªåä¸º <code>dbdata</code> çš„æ•°æ®å·å®¹å™¨ï¼š</p>
					<pre class="fragment" data-fragment-index="2">
						<code class="ruby" data-trim>
							$ docker run -d -v /dbdata --name dbdata training/postgres
						</code>
					</pre>
					<p class="fragment" data-fragment-index="3">ç„¶åï¼Œåœ¨å…¶ä»–å®¹å™¨ä¸­ä½¿ç”¨ <code>--volumes-from</code> æ¥æŒ‚è½½ <code>dbdata</code> å®¹å™¨ä¸­çš„æ•°æ®å·ã€‚</p>
					<pre class="fragment" data-fragment-index="4">
						<code class="ruby" data-trim>
							$ docker run -d --volumes-from dbdata --name db1 training/postgres
$ docker run -d --volumes-from dbdata --name db2 training/postgres
						</code>
					</pre>
				</section>
				<section>
					<h2>åˆ›å»ºé•œè±¡</h2>
					<pre class="fragment" data-fragment-index="0">
						<code data-trim class="ruby">
							$ docker run -it centos:6.2 /bin/bash

root@6f2aef6108b7:/# yum install git
root@6f2aef6108b7:/# exit
						</code>
					</pre>
					<pre class="fragment" data-fragment-index="1">
						<code data-trim class="ruby">
							$ docker commit -m "Get git" -a "wuwj" 6f2aef6108b7 wuwj/centos:6.2
						</code>
					</pre>
				</section>
				<section>
					<h2>ä»“åº“</h2>
					<p class="fragment" data-fragment-index="0">å­˜æ”¾é•œè±¡çš„åœºæ‰€ï¼Œåˆ†ä¸ºå…¬å…±ä»“åº“ (public) å’Œç§æœ‰ä»“åº“ (private)ã€‚</p>
					<p class="fragment" data-fragment-index="1">å…¬å¸ç›®å‰åœ¨ <code>192.168.1.211</code> ä¸Šæ­å»ºäº†ç§æœ‰ä»“åº“ã€‚</p>
					<pre class="fragment" data-fragment-index="2">
						<code data-trim class="ruby">
							$ docker tag wuwj/centos:6.2 192.168.1.211:5000/centos:6.2
$ docker push 192.168.1.211:5000/centos:6.2
						</code>
					</pre>
				</section>
				<section>
					<h2>ç”¨ Dockerfile æ¥åˆ›å»ºè‡ªå·±çš„é•œè±¡</h2>
					<pre class="fragment" data-fragment-index="0">
						<code data-trim class="dockfile">
							FROM mhart/alpine-node:6.3.0

MAINTAINER wuwj@cairenhui.com

WORKDIR /root
RUN echo 'registry=https://registry.npm.taobao.org/' > .npmrc

# Create app directory
RUN mkdir -p /usr/src/app
WORKDIR /usr/src/app

# Install app dependencies
COPY package.json /usr/src/app/
RUN npm install

# Bundle app source
COPY . /usr/src/app

EXPOSE 8080
CMD [ "npm", "start" ]
						</code>
					</pre>
				</section>
				<section>
					<h2>ç”¨ DOCKERFILE æ¥åˆ›å»ºè‡ªå·±çš„é•œè±¡</h2>
					<pre>
						<code data-trim class="ini">
						$ docker run -t wuwj/nodeapp .
Sending build context to Docker daemon 67.58 kB
Step 1 : FROM mhart/alpine-node:6.3.0
6.3.0: Pulling from mhart/alpine-node

e110a4a17941: Pull complete
710e5c1bdc5a: Pull complete
Digest: sha256:cf643279ade5a6064c9238775d47a6096c3b3c2cba6fde8960e96ad306672b24
Status: Downloaded newer image for mhart/alpine-node:6.3.0
 ---> fffb49210fed
Step 2 : WORKDIR /root
 ---> Running in 15c9089753b9
 ---> 97fb9cb60952
Removing intermediate container 15c9089753b9
Step 3 : RUN echo 'registry=https://registry.npm.taobao.org/' > .npmrc
 ---> Running in 90cba5df8ab7
 ---> 0cc936a352a6
Removing intermediate container 90cba5df8ab7
Step 4 : RUN mkdir -p /usr/src/app
 ---> Running in 9905bef8e47f
 ---> 94b034ef9bdf
Removing intermediate container 9905bef8e47f
Step 5 : WORKDIR /usr/src/app
 ---> Running in b6c3286724f2
 ---> 7ba62c277a26
Removing intermediate container b6c3286724f2
Step 6 : COPY package.json /usr/src/app/
 ---> e34a30f764f8
Removing intermediate container 6f5420caa8ea
Step 7 : RUN npm install
 ---> Running in 5eaf2a082a8e
docker_web_app@1.0.0 /usr/src/app
`-- express@4.14.0
  +-- accepts@1.3.3
  | +-- mime-types@2.1.11
  | | `-- mime-db@1.23.0
  | `-- negotiator@0.6.1
  +-- array-flatten@1.1.1
  +-- content-disposition@0.5.1
  +-- content-type@1.0.2
  +-- cookie@0.3.1
  +-- cookie-signature@1.0.6
  +-- debug@2.2.0
  | `-- ms@0.7.1
  +-- depd@1.1.0
  +-- encodeurl@1.0.1
  +-- escape-html@1.0.3
  +-- etag@1.7.0
  +-- finalhandler@0.5.0
  | +-- statuses@1.3.0
  | `-- unpipe@1.0.0
  +-- fresh@0.3.0
  +-- merge-descriptors@1.0.1
  +-- methods@1.1.2
  +-- on-finished@2.3.0
  | `-- ee-first@1.1.1
  +-- parseurl@1.3.1
  +-- path-to-regexp@0.1.7
  +-- proxy-addr@1.1.2
  | +-- forwarded@0.1.0
  | `-- ipaddr.js@1.1.1
  +-- qs@6.2.0
  +-- range-parser@1.2.0
  +-- send@0.14.1
  | +-- destroy@1.0.4
  | +-- http-errors@1.5.0
  | | +-- inherits@2.0.1
  | | `-- setprototypeof@1.0.1
  | `-- mime@1.3.4
  +-- serve-static@1.11.1
  +-- type-is@1.6.13
  | `-- media-typer@0.3.0
  +-- utils-merge@1.0.0
  `-- vary@1.1.0

npm WARN docker_web_app@1.0.0 No repository field.
npm WARN docker_web_app@1.0.0 No license field.
 ---> 260b9eb055cf
Removing intermediate container 5eaf2a082a8e
Step 8 : COPY . /usr/src/app
 ---> 6d05c83ed994
Removing intermediate container dd58b33cb33a
Step 9 : EXPOSE 8080
 ---> Running in 6fdc2eb7127d
 ---> 0252c32634ef
Removing intermediate container 6fdc2eb7127d
Step 10 : CMD npm start
 ---> Running in bc81396443ff
 ---> fe29e536ef2e
Removing intermediate container bc81396443ff
Successfully built fe29e536ef2e
						</code>
					</pre>
				</section>
				<section>
					<h2>å›é¡¾æ€»ç»“</h2>
					<ul>
						<li class="fragment" data-fragment-index="0">è¿è¡Œå®¹å™¨ï¼š<code>docker run</code></li>
						<li class="fragment" data-fragment-index="1">æ‰‹åŠ¨åˆ›å»ºé•œè±¡ï¼š<code>docker commit</code></li>
						<li class="fragment" data-fragment-index="2">åˆ©ç”¨ Dockerfile åˆ›å»ºé•œè±¡</li>
					</ul>
				</section>
				<section>
					<h2>Docker æ˜¯å¦‚ä½•å½±å“æˆ‘ä»¬çš„å¼€å‘ï¼Ÿ</h2>
					<p class="fragment" data-fragment-index="0">æ¥ä¸€ä¸ª Hello World çš„ä¾‹å­ã€‚</p>
				</section>
				<section>
					<h2>Hello World</h2>
					<pre class="fragment">
						<code data-trim class="ruby">
						$ mkdir repository workspace
$ touch settings.xml
						</code>
					</pre>
					<pre class="fragment">
						<code data-trim class="ruby">
						$ tree
.
â”œâ”€â”€ repository
â”œâ”€â”€ settings.xml
â””â”€â”€ workspace
						</code>
					</pre>
				</section>
				<section>
					<h2>Hello World</h2>
					<p>å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ° <code>settings.xml</code> é‡Œï¼š</p>
					<pre class="fragment">
						<code data-trim class="xml">
<?xml version="1.0" encoding="UTF-8"?>
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd">

  <mirrors>
    <mirror>
      <id>nexus</id>
      <mirrorOf>*</mirrorOf>
      <url>http://192.168.1.212:8081/nexus/content/groups/public/</url>
    </mirror>
  </mirrors>
</settings>
</settings>
						</code>
					</pre>
				</section>
				<section>
					<h2>Hello World</h2>
					<p>åˆ›å»ºä¸€ä¸ª Maven WebApp</p>
					<pre class="fragment">
						<code class="ruby" data-trim>
							$ alias gmvn='docker run -it --rm -v $(pwd)/workspace:/usr/src/app -v $(pwd)/settings.xml:/root/.m2/settings.xml -v $(pwd)/repository/:/root/.m2/repository -w /usr/src/app/ maven mvn'
$ gmvn -B archetype:generate -DgroupId=com.crhdocker.demo -DartifactId=hello-world -DarchetypeArtifactId=maven-archetype-webapp -DarchetypeCatalog=local
						</code>
					</pre>
					<pre class="fragment">
						<code data-trim class="ruby">
							hello-world
â”œâ”€â”€ pom.xml
â””â”€â”€ src
    â””â”€â”€ main
        â”œâ”€â”€ resources
        â””â”€â”€ webapp
            â”œâ”€â”€ WEB-INF
            â”‚Â Â  â””â”€â”€ web.xml
            â””â”€â”€ index.jsp
						</code>
					</pre>
				</section>
				<section>
					<h2>Hello World</h2>
					<p>æ„å»º Maven é¡¹ç›®</p>
					<pre class="fragment">
						<code data-trim class="ruby">
							$ alias mvn='docker run -it --rm -v $(pwd)/workspace:/usr/src/app -v $(pwd)/settings.xml:/root/.m2/settings.xml -v $(pwd)/repository/:/root/.m2/repository -w /usr/src/app/hello-world maven mvn'
$ mvn package
						</code>
					</pre>
					<pre class="fragment">
						<code data-trim class="ruby">
						hello-world
â””â”€â”€ target
    â”œâ”€â”€ classes
    â”œâ”€â”€ hello-world
    â”‚Â Â  â”œâ”€â”€ META-INF
    â”‚Â Â  â”œâ”€â”€ WEB-INF
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ classes
    â”‚Â Â  â”‚Â Â  â””â”€â”€ web.xml
    â”‚Â Â  â””â”€â”€ index.jsp
    â”œâ”€â”€ hello-world.war
    â””â”€â”€ maven-archiver
        â””â”€â”€ pom.properties
						</code>
					</pre>
				</section>
				<section>
					<h2>Hello World</h2>
					<p>å°† war åŒ…å¸ƒç½²è‡³ tomcat</p>
					<pre class="fragment">
						<code data-trim class="ruby">
							$ docker run -d -p 8989:8080 \
    -v $(pwd)/workspace/hello-world/target/hello-world.war:/usr/local/tomcat/webapps/hello-world.war \
    --name webapp tomcat:8
						</code>
					</pre>
					<p class="fragment">æ‰“å¼€æµè§ˆå™¨è®¿é—® <a href="http://localhost:8989/hello-world/">http://localhost:8989/hello-world/</a></p>
				</section>
				<section>
					<h2>Hello World</h2>
					<p>åˆ¶ä½œ Docker é•œè±¡ï¼Œä¾¿äºåˆ†å‘</p>
					<pre class="fragment">
						<code data-trim class="dockerfile">
							FROM tomcat:8
ADD workspace/hello-world/target/hello-world.war /usr/local/tomcat/webapps/
CMD ["catalina.sh", "run"]
						</code>
					</pre>
					<pre class="fragment">
						<code data-trim class="ruby">
							$ docker build --rm -t 192.168.1.211:5000/hello-world .
						</code>
					</pre>
				</section>
				<section>
					<h2>Hello World</h2>
					<p>å°†é•œè±¡æ¨é€è‡³å…¬å¸ç§æœ‰ä»“åº“</p>
					<pre class="fragment">
						<code data-trim class="ruby">
							$ docker push 192.168.1.211:5000/hello-world
						</code>
					</pre>
				</section>
				<section>
					<h2>Hello World</h2>
					<p>Run Anywhere!</p>
					<pre class="fragment">
						<code data-trim class="ruby">
							user@host:/$ docker pull 192.168.1.211:5000/hello-world
						</code>
					</pre>
					<pre class="fragment">
						<code data-trim class="ruby">
							user@host:/$ docker run -d -p 8989:8080 --name webapp 192.168.1.211:5000/hello-world
						</code>
					</pre>
				</section>
				<section>
					<h2>èƒ½å¤Ÿè®©æˆ‘ä»¬çš„å¼€å‘ã€æµ‹è¯•ã€è¿ç»´ï¼Œè¿è¡ŒåŒä¸€ç‰ˆæœ¬çš„åº”ç”¨ï¼Œè€Œä¸ç”¨å»ç®¡å€šèµ–çš„ç³»ç»Ÿæˆ–å·¥å…·å’Œç±»åº“ï¼Œç”šè‡³æ˜¯ä¸åŒé…ç½®å—ï¼Ÿ</h2>
				</section>
				<section>
					<h2>å®¹å™¨è¿æ¥</h2>
					<pre class="fragment">
						<code data-trim class="ruby">
							$ docker run -d --name pg -t postgresql
$ docker run -d -p 8000:8000 \
    --link pg:database -t django_app
						</code>
					</pre>
					<pre class="fragment">
						<code data-trim class="ruby">
							root@f9e4e78c60c6:/$ cat /etc/hosts

172.17.0.9  database
						</code>
					</pre>
					<pre class="fragment">
						<code data-trim class="ruby">
							root@f9e4e78c60c6:/# export
DATABASE_PORT="tcp://172.17.0.9:5432"
DATABASE_PORT_5432_TCP="tcp://172.17.0.9:5432"
DATABASE_PORT_5432_TCP_ADDR="172.17.0.9"
DATABASE_PORT_5432_TCP_PORT="5432"
DATABASE_PORT_5432_TCP_PROTO="tcp"
						</code>
					</pre>
				</section>
				<section>
					<h2>å¤šå®¹å™¨åå¥æ›²</h2>
					<p>é…ç½®æ–‡ä»¶ <code>`docker-compose.yml`</code></p>
					<pre class="fragment">
						<code data-trim class="yaml">
							version: '2'
services:
  db:
    image: postgres
  web:
    build: .
    command: python manage.py runserver 0.0.0.0:8000
    volumes:
      - .:/code
    links:
      - redis
    ports:
      - "8000:8000"
    depends_on:
      - db
  redis:
    image: redis
						</code>
					</pre>
				</section>
				<section>
					<h2>å¤šå®¹å™¨åå¥æ›²</h2>
					<p>å¼¹å¥åå¥æ›²</p>
					<pre class="fragment">
						<code data-trim class="ruby">
							$ docker-compose up
Pulling image redis...
Building web...
Starting composetest_redis_1...
Starting composetest_web_1...
redis_1 | [8] 02 Jan 18:43:35.576 # Server started, Redis version 2.8.3
web_1   |  * Running on http://0.0.0.0:8000/
web_1   |  * Restarting with stat
						</code>
					</pre>
				</section>
				<section>
					<h2>å¤šå®¹å™¨åå¥æ›²</h2>
					<p>å¼¹å¥æ°¸æ’åå¥æ›²</p>
					<pre class="fragment">
						<code data-trim class="ruby">
							$ docker-compose up -d
Starting composetest_redis_1...
Starting composetest_web_1...
$ docker-compose ps
Name                 Command            State       Ports
-------------------------------------------------------------------
composetest_redis_1   /usr/local/bin/run         Up
composetest_web_1     /bin/sh -c python app.py   Up      8000->8000/tcp
						</code>
					</pre>
				</section>
				<section>
					<h2>Build once and run anywhere</h2>
					<img src="img/run_anywhere.jpg">
				</section>
				<section>
					<h1>Thanks!</h1>
					<small>å´æ–‡ä¿Š &lt;wuwj@cairenhui.com&gt;</small>
				</section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				history: true,
				transition: Reveal.getQueryHash().transition || 'default',
				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
